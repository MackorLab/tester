!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){document.querySelector("#darkModeToggle").addEventListener("change",(function(e){e.target.checked?(document.body.classList.add("dark-mode"),document.nav.classList.remove("bg-skyblue")):document.body.classList.remove("dark-mode")})),document.querySelector("#submit2").onclick=function(){document.getElementById("chatbox").innerHTML=""};const o=new URL(window.location.href).searchParams.get("key"),n=$("#apiKey");function r(e){localStorage.setItem("apiKey",e)}o?(n.val(o),r(o)):function(){const e=localStorage.getItem("apiKey");e&&n.val(e)}(),n.on("input",()=>{r(n.val())}),n.attr("type","password");const a=$("#chatbox"),l=$("#userInput"),c=$("#sendButton");let u=[];c.on("click",()=>{const e=l.val();if(e){u.push({role:"user",content:e});let t='<pre><div class="message right-side">'+window.markdownit().render(e)+"</div></pre>";a.append(t),a.animate({scrollTop:2e7},"slow"),l.val(""),c.val("📤"),c.prop("disabled",!0),function(e){const t=$("#apiKey").val(),o=parseFloat(s.value),n=parseFloat(d.value),r=y.textContent,l=parseInt(g.value);var i={url:"https://api.openai.com/v1/chat/completions",method:"POST",timeout:0,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},data:JSON.stringify({model:"gpt-3.5-turbo",messages:u,conversation_id:e,temperature:o,top_p:n,stop:r,max_tokens:l})};$.ajax(i).done((function(e){const t=e.choices[0].message;u.push({role:t.role,content:t.content});const o=window.markdownit().render(t.content),n=CryptoJS.MD5(o),r='<pre><div class="message left-side" id="'+n+'">'+o+'</div><i class="far fa-clipboard ml-1 btn btn-outline-dark" id="'+n+'-copy"></i></pre>';a.append(r);var l=document.getElementById(n+"-copy"),s=document.getElementById(n);l.addEventListener("click",(function(){var e=document.createElement("textarea");e.value=s.textContent,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e);var t=document.getElementById("copy-popup");t.style.display="block",setTimeout((function(){t.style.display="none"}),1e3)})),a.animate({scrollTop:2e7},"slow"),c.val("Отправить"),c.prop("disabled",!1);t.content.split(" ").length;const i=document.querySelector("#fontSelect").value;document.querySelectorAll(".message").forEach((function(e){e.style.fontFamily=i}))})).fail((function(e,t,o){c.val("Error");let n='<pre><div class="message left-side  text-danger" >'+("Error: "+e.responseJSON.error.message)+"</div></pre>";a.append(n),a.animate({scrollTop:2e7},"slow")}))}();const o=document.querySelector("#fontSelect").value;document.querySelectorAll(".message").forEach((function(e){e.style.fontFamily=o}))}}),setInterval((function(){}),1e3),l.on("keydown",e=>{if(13!==e.keyCode||e.ctrlKey||e.shiftKey){if(13===e.keyCode&&(e.ctrlKey||e.shiftKey)){e.preventDefault();const t=l.prop("selectionStart"),o=l.val();l.val(o.slice(0,t)+"\n"+o.slice(t)),l.prop("selectionStart",t+1),l.prop("selectionEnd",t+1)}}else e.preventDefault(),c.click()});const s=document.querySelector("#formControlTemp"),i=document.querySelector("#rangeTemp"),d=document.querySelector("#formControlTop_P"),p=document.querySelector("#rangeTop_P"),m=()=>{localStorage.setItem("rangeValue",s.value),localStorage.setItem("rangeValue2",d.value)};(()=>{const e=localStorage.getItem("rangeValue"),t=localStorage.getItem("rangeValue2");e&&(s.value=e,i.textContent=e),t&&(d.value=t,p.textContent=t)})(),s.addEventListener("input",()=>{i.textContent=s.value,m()}),d.addEventListener("input",()=>{p.textContent=d.value,m()});const v=document.querySelector("#stopWordInput"),y=document.querySelector("#stopWordValue"),f=localStorage.getItem("stopWord");if(f)v.value=f,y.textContent=f;else{const e=v.value;y.textContent=e}v.addEventListener("input",()=>{const e=v.value;y.textContent=e,localStorage.setItem("stopWord",e)});const g=document.querySelector("#maxTokensInput"),S=document.querySelector("#maxTokensValue"),b=localStorage.getItem("maxTokens");f?(g.value=b,S.textContent=b):S.textContent=g.value,g.addEventListener("input",()=>{S.textContent=g.value,localStorage.setItem("maxTokens",g.value)}),document.querySelector("#submit").onclick=function(){const e=s.value,t=d.value,o=y.textContent,n=g.value;console.log(n),alert("Значение ползунка - Temp: "+e+" Значение ползунка - Top_P: "+t+" Значение ползунка - Fr: "+o+" Значение ползунка MAX: "+n)};const x=document.querySelector("#fontSelect");x.addEventListener("change",(function(){const e=x.value;document.body.style.fontFamily=e}))}]);
